
/*
************************************************************************************************************************
*           INCLUDE FILES
************************************************************************************************************************
*/

#include <stdint.h>

#include "utils.h"


/*
************************************************************************************************************************
*           LOCAL DEFINES
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           LOCAL CONSTANTS
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           LOCAL DATA TYPES
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           LOCAL MACROS
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           LOCAL GLOBAL VARIABLES
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           LOCAL FUNCTION PROTOTYPES
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           LOCAL CONFIGURATION ERRORS
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           LOCAL FUNCTIONS
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           GLOBAL FUNCTIONS
************************************************************************************************************************
*/

char** string_split(char *str, const char token)
{
    uint32_t count;
    char *pstr, **list = NULL;

    if (!str) return list;

    /* count the tokens */
    pstr = str;
    count = 1;
    while (*pstr)
    {
        if (*pstr == token) count++;
        pstr++;
    }

    /* allocates memory to list */
    list = MALLOC((count + 1) * sizeof(char *));
    if (list == NULL) return NULL;

    /* fill the list pointers */
    pstr = str;
    list[0] = pstr;
    count = 0;
    while (*pstr)
    {
        if (*pstr == token)
        {
            *pstr = '\0';
            list[++count] = pstr + 1;
        }
        pstr++;
    }

    list[++count] = NULL;

    return list;
}


uint32_t array_length(char **str_array)
{
    uint32_t count = 0;

    while (str_array[count]) count++;
    return count;
}
