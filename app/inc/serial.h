
/*
************************************************************************************************************************
*
************************************************************************************************************************
*/

#ifndef SERIAL_H
#define SERIAL_H


/*
************************************************************************************************************************
*           INCLUDE FILES
************************************************************************************************************************
*/

#include <stdint.h>


/*
************************************************************************************************************************
*           DO NOT CHANGE THESE DEFINES
************************************************************************************************************************
*/

enum {SERIAL0, SERIAL1, SERIAL2, SERIAL3};


/*
************************************************************************************************************************
*           CONFIGURATION DEFINES
************************************************************************************************************************
*/

// buffer size
#define SERIAL_RX_BUFFER_SIZE   32
#define SERIAL_TX_BUFFER_SIZE   32


/*
************************************************************************************************************************
*           DATA TYPES
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           GLOBAL VARIABLES
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           MACRO'S
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           FUNCTION PROTOTYPES
************************************************************************************************************************
*/

void serial_init(uint8_t port, uint32_t baudrate, uint8_t priority);
void serial_set_callback(uint8_t port, void (*receive_cb)(uint8_t _port));
uint32_t serial_send(uint8_t port, uint8_t *data, uint32_t data_size);
uint32_t serial_read(uint8_t port, uint8_t *data, uint32_t data_size);

// this function will be called automatically from UART interrupt in case of error
// the user must create this function in your application code
// the error_bits can be: UART_LSR_OE, UART_LSR_PE, UART_LSR_FE, UART_LSR_BI, UART_LSR_RXFE
extern void serial_error(uint8_t port, uint32_t error_bits);


/*
************************************************************************************************************************
*           CONFIGURATION ERRORS
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           END HEADER
************************************************************************************************************************
*/

#endif
