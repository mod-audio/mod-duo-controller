
/*
************************************************************************************************************************
*
************************************************************************************************************************
*/

#ifndef CHAIN_H
#define CHAIN_H


/*
************************************************************************************************************************
*           INCLUDE FILES
************************************************************************************************************************
*/

#include <stdint.h>
#include "data.h"


/*
************************************************************************************************************************
*           DO NOT CHANGE THESE DEFINES
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           CONFIGURATION DEFINES
************************************************************************************************************************
*/

// Those special bytes are used in the communication between HMI and UI
#define CONTROL_CHAIN_ESCAPE_BYTE   0x5C
#define CONTROL_CHAIN_END_BYTE      0x00

#define CONTROL_CHAIN_SYNC_BYTE     0xAA
#define CONTROL_CHAIN_HOST_ID       0x00

#define CONTROL_CHAIN_BUFFER_SIZE   512


/*
************************************************************************************************************************
*           DATA TYPES
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           GLOBAL VARIABLES
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           MACRO'S
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           FUNCTION PROTOTYPES
************************************************************************************************************************
*/

void chain_init(void);
void chain_dev2ui_push(const uint8_t* data_chunk, uint32_t data_size, uint8_t eof);
uint32_t chain_dev2ui_pop(uint8_t *buffer, uint32_t buffer_size);
void chain_ui2dev(const char *buffer);


/*
************************************************************************************************************************
*           CONFIGURATION ERRORS
************************************************************************************************************************
*/


/*
************************************************************************************************************************
*           END HEADER
************************************************************************************************************************
*/

#endif
